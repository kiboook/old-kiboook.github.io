---
title:  "[Spring] ë¡¬ë³µì„ ì´ìš©í•œ DTO ìƒì„±ê³¼ í…ŒìŠ¤íŠ¸"
excerpt: ""

categories:
  - Spring

tags:
---

**[2020.12.28]** ë¶€í„° **ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤** ì±…ì„ í†µí•´ ìŠ¤í”„ë§ ê³µë¶€ë¥¼ ì‹œì‘í–ˆë‹¤.

ê³µë¶€í•œ ë‚´ìš©ì„ ê¸€ë¡œ ì •ë¦¬í•˜ë ¤ê³  í•œë‹¤.

ê·¸ë˜ì•¼ ë‚˜ì¤‘ì— ë‹¤ì‹œ ì°¾ì•„ë³´ë©° ê³µë¶€ í•  ìˆ˜ ìˆì„í…Œë‹ˆê¹Œ !!

##  ğŸ¢ DTO í´ë˜ìŠ¤ ìƒì„±

DTO ëŠ” Data Transfer Object ë¡œì¨ ë§ ê·¸ëŒ€ë¡œ ë°ì´í„°ë“¤ì„ ë°›ì•„ì™€ ì „ì†¡í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤.

DTO í´ë˜ìŠ¤ëŠ” ì•„ë¬´ëŸ° ë©”ì†Œë“œë¥¼ ê°€ì§€ì§€ ì•Šê³  í•„ë“œì™€ Get, Set ë§Œ ê°€ì§€ê³  ìˆë‹¤.

í•˜ì§€ë§Œ ëŒ€ë¶€ë¶„ DB ì—ì„œ êº¼ë‚¸ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê°’ì„ ë³€ê²½ í•  ì¼ì€ ì—†ì–´ Set ì€ ì—†ë‹¤ê³  í•œë‹¤.

<a href="https://nam-ki-bok.github.io/Spring/GetTest/" style="color:#0FA678">[Spring] GET API test ì½”ë“œ ì‘ì„±</a> ì— ì´ì–´ì„œ ëª¨ë“  ì‘ë‹µì— ëŒ€í•œ DTO ë¥¼ ì €ì¥í•  dto íŒ¨í‚¤ì§€ë¥¼ web íŒ¨í‚¤ì§€ì— ìƒì„±í•œë‹¤.

ê·¸ë¦¬ê³  name ê³¼ amount ë¥¼ ê°€ì ¸ ì˜¬ DTO í´ë˜ìŠ¤ë¥¼ **HelloResponseDto** ì´ë¦„ìœ¼ë¡œ ìƒì„±í•œë‹¤.

<img width="250" alt="ìŠ¤í¬ë¦°ìƒ· 2020-12-31 ì˜¤í›„ 8 40 57" src="https://user-images.githubusercontent.com/54533309/103409089-7ede0300-4ba8-11eb-8f5c-7009ebd62235.png">

<br>

ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```java
package com.boks.springboot.web.dto;

import lombok.Getter;
import lombok.RequiredArgsConstructor;

@Getter  // ì„ ì–¸ëœ ëª¨ë“  í•„ë“œì˜ get ë©”ì†Œë“œ ìƒì„±
@RequiredArgsConstructor  // ì„ ì–¸ëœ ëª¨ë“  final í•„ë“œê°€ í¬í•¨ ëœ ìƒì„±ì ìƒì„±
public class HelloResponseDto {

    private final String name;
    private final int amount;
}
```

DTO ëŠ” ë¶„ëª…íˆ Get ì„ ê°€ì§€ê³  ìˆì–´ì•¼ í•œë‹¤ê³  í–ˆëŠ”ë° ì§€ê¸ˆ í´ë˜ìŠ¤ë¥¼ ë³´ë©´ ì•„ë¬´ëŸ° ë©”ì†Œë“œê°€ ì—†ë‹¤.

ë°”ë¡œ ë¡¬ë³µì„ ì´ìš©í•´ ìƒì„±í–ˆê¸° ë•Œë¬¸ì´ë‹¤.

ì–´ë…¸í…Œì´ì…˜ì„ ë³´ë©´ **@Getter**, **@RequiredArgsConstructor** ê°€ ìˆëŠ”ë°

ê°ê° ì„ ì–¸ëœ ëª¨ë“  í•„ë“œì˜ get ë©”ì†Œë“œë¥¼ ìƒì„±í•´ì£¼ê³ , ì„ ì–¸ëœ ëª¨ë“  final í•„ë“œê°€ í¬í•¨ ëœ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤.

final ì´ ì•„ë‹Œ í•„ë“œëŠ” ìƒì„±ìì— ì¶”ê°€í•˜ì§€ ì•ŠëŠ”ë‹¤.

ë¬¼ë¡  ì¸í…”ë¦¬ì œì´ ìì²´ë„ Getter Setter ë¥¼ ë§Œë“¤ì–´ ì£¼ì§€ë§Œ ë¡¬ë³µì„ ì‚¬ìš©í•˜ë©´ ë‹¤ë¥¸ ê²ƒë“¤ë„ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ìƒì„± í•  ìˆ˜ ìˆë‹¤.

## ğŸª í”„ë¡œì íŠ¸ì— ë¡¬ë³µ ì ìš©í•˜ê¸°

ë¡¬ë³µì€ ëª¨ë“  í”„ë¡œì íŠ¸ì— ì ìš© ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì ìš© í•˜ê³  ì‹¶ì€ í”„ë¡œì íŠ¸ì— ì ìš©ì„ í•´ì¤˜ì•¼ í•œë‹¤.

ì§€ê¸ˆ í•˜ê³ ìˆëŠ” í”„ë¡œì íŠ¸ì— ë¡¬ë³µì„ ì ìš©í•˜ê¸° ìœ„í•´ **build.gradle** íŒŒì¼ì— ì½”ë“œë¥¼ ì¶”ê°€í•´ ì¤˜ì•¼í•œë‹¤.

í”„ë¡œì íŠ¸ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•´ **dependencies** ì•ˆì— **compile('org.projectlombok:lombok')** ì½”ë“œë¥¼ ì¶”ê°€í•˜ì.

dependencies ë¥¼ ì‹¤í–‰í•˜ë©´ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë°›ì•„ì˜¨ë‹¤.

ê·¸ë¦¬ê³  í”ŒëŸ¬ê·¸ì¸ì—ì„œ ë¡¬ë³µì„ ê²€ìƒ‰ í›„ ì ìš©í•œ ë’¤ ì¸í…”ë¦¬ì œì´ë¥¼ ì¬ì‹œì‘ í•˜ë©´ ëœë‹¤.

<img width="800" alt="ìŠ¤í¬ë¦°ìƒ· 2020-12-31 ì˜¤í›„ 8 45 47" src="https://user-images.githubusercontent.com/54533309/103409235-2b1fe980-4ba9-11eb-82ec-d82da0d96484.png">

ì¬ì‹œì‘ í•˜ëŠ” ê²½ìš° **Enable Annotation Processing** ì„ ì²´í¬í•˜ë¼ëŠ” ì´ë²¤íŠ¸ ë¡œê·¸ê°€ ë‚˜ì˜¤ë‹ˆ ê¼­ ì²´í¬í•˜ë„ë¡ í•˜ì.

## ğŸ¯ ë¡¬ë³µ ì ìš© DTO í…ŒìŠ¤íŠ¸

ì´ì œ  **@Getter** ì™€ **@RequiredArgsConstructor** ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ì˜ ìƒì„±ì´ ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•  ì‹œê°„ì´ë‹¤.

ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ì™€ ê°™ì´ test í´ë”ì—ë„ dto íŒ¨í‚¤ì§€ì™€ HelloResponseDtoTest íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ì.

<img width="232" alt="ìŠ¤í¬ë¦°ìƒ· 2020-12-31 ì˜¤í›„ 8 58 31" src="https://user-images.githubusercontent.com/54533309/103409613-f319a600-4baa-11eb-9ef5-451f8ab41d1d.png">

<br>

í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```java
package com.boks.springboot.web.dto;

import org.junit.Test;
import static org.assertj.core.api.Assertions.assertThat;

public class HelloResponseDtoTest {

    @Test
    public void testLombokFunction() {
        // Given
        String name = "test";
        int amount = 1000;

        // When
        HelloResponseDto dto = new HelloResponseDto(name, amount);

        // Then
        assertThat(dto.getName()).isEqualTo(name);
        assertThat(dto.getAmount()).isEqualTo(amount);
    }
}
```

**assertThat** ë©”ì†Œë“œë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê²Œ ë˜ëŠ”ë° getName ê³¼ name ì´ ê°™ìœ¼ë©´ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•œë‹¤.

ì´ë•Œ JUnit ì˜ assertThat ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  assertj ì˜ ê²ƒì„ ì‚¬ìš©í–ˆëŠ”ë° ì¥ì ì´ ë” ë§ë‹¤ê³  í•œë‹¤.

ì½”ë“œë¥¼ ë³´ë©´ name ê³¼ amount ë¡œ test, 1000 ì„ ë„˜ê²¨ì£¼ì–´ dto ê°ì²´ë¥¼ ìƒì„±í•˜ê²Œ ëœë‹¤.

ê·¸ë¦¬ê³  get ì„ í†µí•´ ìƒì„±í•œ ê°ì²´ì˜ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.

ì´ë•Œ ë¡¬ë³µì„ í†µí•´ ìƒì„±ìì™€ get ì´ ì˜ ë§Œë“¤ì–´ì¡Œë‹¤ë©´ í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼ í•  ê²ƒì´ë‹¤.

<img width="1100" alt="ìŠ¤í¬ë¦°ìƒ· 2020-12-31 ì˜¤í›„ 9 02 08" src="https://user-images.githubusercontent.com/54533309/103409735-73d8a200-4bab-11eb-912a-b958e9d53267.png">

ê²°ê³¼ëŠ” í†µê³¼!

## ğŸ§ API ìƒì„± í›„ í…ŒìŠ¤íŠ¸

ë¡¬ë³µì„ í†µí•´ DTO ê°€ ì˜ ìƒì„± ë˜ëŠ” ê²ƒì„ ì•Œì•˜ìœ¼ë‹ˆ API ë¥¼ ë§Œë“¤ì–´ í…ŒìŠ¤íŠ¸ í•  ì‹œê°„ì´ë‹¤.

<a href="https://nam-ki-bok.github.io/Spring/GetTest/" style="color:#0FA678">[Spring] GET API test ì½”ë“œ ì‘ì„±</a> ì—ì„œ ë§Œë“  **HelloController** ì— DTO ë¥¼ ê°€ì ¸ë‹¤ ì£¼ëŠ” API ë¥¼ ë§Œë“¤ì.

```java
package com.boks.springboot.web;

import com.boks.springboot.web.dto.HelloResponseDto;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController  // ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ JSONì„ ë°˜í™˜í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ë§Œë“¤ì–´ ì¤Œ.
public class HelloController {

    @GetMapping("/hello")  // GET ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆëŠ” APIë¥¼ ë§Œë“¤ì–´ ì¤Œ.
    public String hello() {
        return "hello";
    }

    @GetMapping("/hello/dto")
    public HelloResponseDto helloDto(@RequestParam("name") String name,
                                     @RequestParam("amount") int amount) {
        return new HelloResponseDto(name, amount);
    }
}
```

127.0.0.1:8080/hello/dto ì˜ ì£¼ì†Œì— ìš”ì²­ì„ ë³´ë‚´ë©´ DTO ë¥¼ ë°˜í™˜ í•´ ì£¼ëŠ” API ë¥¼ ë§Œë“¤ì—ˆë‹¤.

**@RequestParam** ì„ í†µí•´ ì™¸ë¶€ì—ì„œ API ì— ë„£ì–´ì¤€ name, amount ë¥¼ í†µí•´ String name, int amout ì— ì €ì¥ í•œë‹¤.

ê·¸ë¦¬ê³  DTO ë¥¼ ìƒì„±í•´ ë°˜í™˜í•œë‹¤

API ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤.

**HelloControllerTest** íŒŒì¼ì— ì´ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•´ ì£¼ë„ë¡ í•˜ì.

```java
package com.boks.springboot.web;


import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.test.web.servlet.MockMvc;

import static org.hamcrest.Matchers.is;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

@RunWith(SpringRunner.class)  // ìŠ¤í”„ë§ ë¶€íŠ¸ í…ŒìŠ¤íŠ¸ì™€ JUnit ì‚¬ì´ì˜ ì—°ê²°ì ì—­í• 
@WebMvcTest(controllers = HelloController.class)  // ì—¬ëŸ¬ ìŠ¤í”„ë§ í…ŒìŠ¤íŠ¸ ì–´ë…¸í…Œì´ì…˜ ì¤‘ webì— ì§‘ì¤‘
public class HelloControllerTest {

    @Autowired  // ìŠ¤í”„ë§ì´ ê´€ë¦¬í•˜ëŠ” beanì„ ì£¼ì…
    private MockMvc mvc;  // ì›¹ APIë¥¼ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²½ìš° ì‚¬ìš©, í…ŒìŠ¤íŠ¸ì˜ ì‹œì‘ì 

    @Test
    public void returnHello() throws Exception {
        String hello = "hello";

        mvc.perform(get("/hello"))  // MockMvcë¥¼ í†µí•´ /hello ì£¼ì†Œë¡œ GET ìš”ì²­
                .andExpect(status().isOk())  // ì´ ìš”ì²­ì˜ ìƒíƒœë¥¼ ê²€ì¦, ì´ ê²½ìš° OK ì¦‰ 200 ì¸ì§€ í™•ì¸
                .andExpect(content().string(hello));  // GETì„ í†µí•´ ë°›ì€ ê°’ì´ hello ì¸ì§€ í™•ì¸
    }

    @Test
    public void returnHelloDto() throws Exception {
        String name = "test";
        int amount = 100;

        mvc.perform(get("/hello/dto")
                .param("name", name)
                .param("amount", String.valueOf(amount)))
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.name", is(name)))
                .andExpect(jsonPath("$.amount", is(amount)));
    }
}
```

param ì„ í†µí•´ ì•„ê¹Œ ë§Œë“¤ì—ˆë˜ API ì— test, 100 ì˜ ê°’ì„ ì „ë‹¬ í•´ ì¤„ê²ƒì´ë‹¤.

ì—¬ê¸°ì„œ String ì˜ ê°’ìœ¼ë¡œ ë°–ì— ì „ë‹¬ì„ í•  ìˆ˜ ì—†ìœ¼ë‹ˆ ê¼­ String ìœ¼ë¡œ ë°”ê¾¸ì–´ ì „ë‹¬ í•´ì•¼í•œë‹¤.

ìš°ì„  ì‘ë‹µ ì½”ë“œê°€ 200ì¸ì§€ í™•ì¸ì„ í•˜ê³  ë‹¤ìŒìœ¼ë¡œ **jsonpath** ë¥¼ í†µí•´ name, amout ê°’ì„ ë¹„êµí•œë‹¤.

ì •ìƒì ìœ¼ë¡œ ì§„í–‰ì´ ëë‹¤ë©´ API ì— test, 100 ì„ ë„˜ê²¨ì£¼ì–´ DTO ë¥¼ ìƒì„±í•˜ê³  ë°›ì•„ì˜¨ JSON ê³¼ ê°™ì€ì§€ í…ŒìŠ¤íŠ¸ í•  ê²ƒì´ë‹¤.

<img width="1723" alt="ìŠ¤í¬ë¦°ìƒ· 2020-12-31 ì˜¤í›„ 9 18 22" src="https://user-images.githubusercontent.com/54533309/103410213-b8653d00-4bad-11eb-8f9d-d6cb1a462e24.png">

ê²°ê³¼ëŠ” í†µê³¼!

## ğŸ“• ì •ë¦¬

ë¡¬ë³µì„ ì´ìš©í•´ í´ë˜ìŠ¤ë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œê²Œ ëë‹¤.

ì´ë¥¼ í†µí•´ DTO ë¥¼ ìƒì„±í•˜ê³ , ìƒì„±ì´ ì˜ ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ í™•ì¸í–ˆë‹¤.

ìƒì„±ì´ ì˜ ë˜ëŠ”ì§€ í™•ì¸í–ˆê¸° ë•Œë¬¸ì— ë‹¤ìŒìœ¼ë¡œ DTO ë¥¼ ë°˜í™˜í•˜ëŠ” GET API ë¥¼ ë§Œë“¤ì—ˆë‹¤.

API ë„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ì •ìƒ ì‘ë™ì´ ë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤.

ë‹¤ìŒì—ëŠ” ë“œë””ì–´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ë™í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ê³µë¶€í•œë‹¤.

<br>

