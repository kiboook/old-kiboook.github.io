---
title:  "[FIFA Online TMI] ë„¥ìŠ¨ Open APIë¡œ ìœ ì € ì •ë³´ ê°€ì ¸ì˜¤ê¸°"
excerpt: ""

categories:
  - Spring

tags:
---

## âš½ï¸ Nexon Open API

ë„¥ìŠ¨ ì˜¤í”ˆ API ë¥¼ ì‚¬ìš©í•˜ì—¬ í”¼íŒŒ ì˜¨ë¼ì¸4 ì˜ ê°ì¢… ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ë ¤ê³  í•œë‹¤.

API ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë¨¼ì € ì–´í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡ì„ í•˜ê³  í‚¤ë¥¼ ë°œê¸‰ë°›ì•„ì•¼ í•œë‹¤.

ì´ìš©ì•½ê´€ì„ ë³´ë©´ í‚¤ëŠ” íƒ€ì¸ì—ê²Œ ê³µìœ ë¥¼ í•˜ë©´ ì•ˆ ë˜ë‹ˆ ë…¸ì¶œì´ ë˜ì§€ ì•Šë„ë¡ ì¡°ì‹¬í•˜ì.

<img src="https://user-images.githubusercontent.com/54533309/106391222-9cb0b900-642f-11eb-9bb9-ed253a81c71d.png" alt="ìŠ¤í¬ë¦°ìƒ· 2021-02-01 ì˜¤ì „ 1 48 39" width="800" />

ë˜ API ë¥¼ ì‚¬ìš©í•˜ë©´ ì„œë¹„ìŠ¤ ë‚´ì— ë°ì´í„°ë¥¼ NEXON DEVELOPERS ì—ì„œ ì œê³µ ë°›ì•˜ìŒì„ ëª…ì‹œí•´ì•¼í•œë‹¤.

<img src="https://user-images.githubusercontent.com/54533309/106391285-e7cacc00-642f-11eb-8f38-616f66e08b75.png" alt="ìŠ¤í¬ë¦°ìƒ· 2021-02-01 ì˜¤ì „ 1 50 43" width="800" />

ë‘ ê°€ì§€ë¥¼ ëª¨ë‘ ì¸ì§€í–ˆë‹¤ë©´ API ë¥¼ ì‚¬ìš©í•  ì¤€ë¹„ëŠ” ëë‚¬ë‹¤.

ìœ ì € ì •ë³´, ë§¤ì¹˜ ì •ë³´, ë­ì»¤ ì •ë³´, ë©”íƒ€ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ”ë° ìš°ì„  ê°€ì¥ ê¸°ë³¸ì ì¸ ìœ ì €ì •ë³´ë¥¼ ê°€ì ¸ì™€ ë³´ì.

## ğŸ“¡ ìœ ì € ì •ë³´ ì¡°íšŒ API

![ìŠ¤í¬ë¦°ìƒ· 2021-02-01 ì˜¤ì „ 1 46 03](https://user-images.githubusercontent.com/54533309/106391156-3fb50300-642f-11eb-8c6f-2527d0ae60d2.png)

![ìŠ¤í¬ë¦°ìƒ· 2021-02-01 ì˜¤ì „ 1 55 48](https://user-images.githubusercontent.com/54533309/106391433-9d961a80-6430-11eb-80c7-6c5090030fc9.png)





í‚¤ê°’ì„ í—¤ë”ì— ë„£ê³  ì¡°íšŒí•˜ê³  ì‹¶ì€ ìœ ì € ë‹‰ë„¤ì„ì„ ë¶™ì—¬ ìš”ì²­í•˜ë©´ ê³ ìœ  ì‹ë³„ì, ìœ ì € ë‹‰ë„¤ì„, ìœ ì € ë ˆë²¨ì„ ë°˜í™˜í•œë‹¤.

## ğŸ’¡ Mustache í…œí”Œë¦¿ êµ¬ì„±

ìœ ì € ë‹‰ë„¤ì„ì„ ì…ë ¥í•  í™”ë©´ì„ êµ¬ì„±í•´ì•¼ í•œë‹¤. ìš°ì„  ìœ ì € ì •ë³´ë§Œ ê²€ìƒ‰í•  ìˆ˜ ìˆë„ë¡ í™”ë©´ì„ êµ¬ì„±í–ˆë‹¤.

```html
<h1 style="text-align: center">FIFA Online 4 - TMI</h1>

<div class="container" style="margin-top: 150px;">
    <h3 style="text-align: center">êµ¬ë‹¨ì£¼ ê²€ìƒ‰</h3>
    <form>
        <div class="mx-auto" style="width: 350px;">
            <div class="input-group">
                <input type="text" class="form-control" id="nickname" placeholder="êµ¬ë‹¨ì£¼ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                       style="margin-right: 10px;">
                <button class="btn btn-primary" type="button" id="btn-user-info">ê²€ìƒ‰</button>
            </div>
        </div>
    </form>
</div>
```

![ìŠ¤í¬ë¦°ìƒ· 2021-02-01 ì˜¤ì „ 2 09 36](https://user-images.githubusercontent.com/54533309/106391822-8b1ce080-6432-11eb-9c57-a394747c4f7d.png)

ë‚˜ì¤‘ì— ì¶”ê°€ë  ëª¨ë“  í™”ë©´ì—ë„ Data based on NEXON DEVELOPERS ë¬¸êµ¬ê°€ ì¶”ê°€ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— footer ì— ë„£ì–´ì£¼ì—ˆë‹¤.

ì´ì œ ìœ ì € ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ê³  ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ API ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆê²Œ js íŒŒì¼ì„ ì‘ì„±í•˜ë©´ ëœë‹¤.

ê°€ì ¸ì˜¨ ì •ë³´ë¥¼ ì¶œë ¥í•  í™”ë©´ì€ ë§Œë“¤ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— alert ë¥¼ í†µí•´ í™•ì¸í•œë‹¤.

```javascript
var main = {
    init: function () {
        var _this = this;
        $('#btn-user-info').on('click', function () {
            _this.search_user_info();
        });
    },
    search_user_info : function () {
        const nickname = $('#nickname').val();

        $.ajax({
            type: 'GET',
            url: '/api/v1/user/'+nickname,
            dataType: 'json',
            contentType: 'application/json; charset=utf-8'
        }).done(function (res) {
            alert(JSON.stringify(res));
        }).fail(function (error) {
            alert(JSON.stringify(error));
        });
    }
};

main.init();
```

## âš™ï¸ web/UserApiController

```java
package com.fifaonline.tmi.web;

import com.fifaonline.tmi.service.UserService;
import com.fifaonline.tmi.web.dto.UserResponseDto;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;

@RequiredArgsConstructor
@RestController
public class UserApiController {
    private final UserService userService;

    @GetMapping("/api/v1/user/{nickname}")
    public UserResponseDto get(@PathVariable String nickname) {
        return userService.searchUserInfo(nickname);
    }
}
```

## ğŸ”¨ service/UserService

```java
package com.fifaonline.tmi.service;

import com.fifaonline.tmi.api.UserApiClient;
import com.fifaonline.tmi.web.dto.UserResponseDto;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@RequiredArgsConstructor
@Service
public class UserService {
    private final UserApiClient userApiClient;

     @Transactional(readOnly = true)
    public UserResponseDto searchUserInfo(String nickname) {
        return userApiClient.requestUserInfo(nickname);
    }
}
```

## ğŸ”§ api/UserApiClient

```java
package com.fifaonline.tmi.api;

import com.fifaonline.tmi.config.ApiKey;
import com.fifaonline.tmi.web.dto.UserResponseDto;
import lombok.RequiredArgsConstructor;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;

@RequiredArgsConstructor
@Service
public class UserApiClient {

    private final RestTemplate restTemplate;

    private final String API_KEY = ApiKey.API_KEY;

    private final String UserInfoUrl = "https://api.nexon.co.kr/fifaonline4/v1.0/users?nickname={nickname}";

    public UserResponseDto requestUserInfo(String nickname) {
        final HttpHeaders httpHeaders = new HttpHeaders();
        httpHeaders.set("Authorization", API_KEY);

        final HttpEntity<String> entity = new HttpEntity<>(httpHeaders);

        return restTemplate.exchange(UserInfoUrl, HttpMethod.GET, entity, UserResponseDto.class, nickname).getBody();
    }
}
```

API KEY ëŠ” ì™¸ë¶€ì— ìœ ì¶œë˜ë©´ ì•ˆ ë˜ê¸° ë•Œë¬¸ì— static ë³€ìˆ˜ë¡œ ë§Œë“¤ì–´ ë”°ë¡œ ê°€ì ¸ì˜¤ê³  ê¹ƒí—ˆë¸Œì— ì»¤ë°‹ì€ í•˜ì§€ ì•ŠëŠ”ë‹¤.

## ğŸ”¨ dto/UserResponseDto

```java
package com.fifaonline.tmi.web.dto;

import lombok.Data;
import lombok.Getter;

@Data
@Getter
public class UserResponseDto {
    private String accessId;
    private String nickname;
    private int level;
}
```

## ğŸ“¬ ê²°ê³¼

![ìŠ¤í¬ë¦°ìƒ· 2021-02-01 ì˜¤ì „ 2 24 40](https://user-images.githubusercontent.com/54533309/106392340-a852ae80-6434-11eb-9d49-b0a4b5ae56d6.png)

ìœ ì € ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ê³  ê²€ìƒ‰ì„ ëˆ„ë¥´ë©´ ì •ë³´ë¥¼ ì˜ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

<br>



